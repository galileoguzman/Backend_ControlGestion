{% extends 'base.html' %}
{% block title %}
    <nav>
    <div class="nav-wrapper  red darken-4 col s12">
    <a href="#" class="brand-logo">Nuevo Documento {{ Document.folio }}</a>
    <ul id="nav-mobile" class="right hide-on-med-and-down">
      <li><a href="/">Inicio</a></li>
    </ul>
    </div>
    </nav>
{% endblock %}

{% block breadcrumb %}
  <div class="row">
    <form class="col s12">
      <div class="row">
      <div class="row">
        <div class="input-field col s3">
          <input disabled value="Folio" id="disabled" type="text" class="validate">{{ Document.folio }}
          <label for="disabled"></label>
        </div>
  <div class="input-field col s3">
    <select id="select1">
      <option value="" disabled selected></option>
      <option value="1">Option 1</option>
      <option value="2">Option 2</option>
      <option value="3">Option 3</option>
    </select>
    <label>Importancia</label>
  </div>

      <div class="file-field input-field col s6">
      <div class="btn">
        <span>File</span>
        <input type="file" multiple>
      </div>
      <div class="file-path-wrapper">
        <input class="file-path validate" type="text" placeholder="Upload one or more files">
      </div>
    </div>     


        </div>
        
  <div class="row">
    <div class="col s12">
      <div class="row">
      	<div class="input-field col s6">
          <input placeholder="" id="first_name" type="text" class="validate">
          <label for="first_name">Remitente</label>
        </div>
  <div class="input-field col s6">
    <select multiple id="select2">
      <option value="" disabled selected>Usuarios disponibles</option>
      <option value="1" >Option 1</option>
      <option value="2">Option 2</option>
      <option value="3">Option 3</option>
    </select>
    <label>Enviar a:</label>
  </div>
      </div>

      </div>
    </div>
  </div>
        



      <div class="row">
        <div class="input-field col s3">
          <input id="password" type="number" class="validate">
          <label for="password">Número de Hojas</label>
        </div>
        <div class="input-field col s3">
          <input id="password" type="number" class="validate">
          <label for="password">Número de Anexo</label>
        </div>
      </div>


  <div class="row">
    <form class="col s12">
      <div class="row">
        <div class="input-field col s12">
          <textarea id="textarea1" class="materialize-textarea"></textarea>
          <label for="textarea1">Descripción</label>
        </div>
      </div>
    </form>
  </div> 

      <div class="row">
        <div class="col s3">
          Fecha de Expiración:
          <div class="input-field inline">
            <input id="email" type="date" class="validate">
            <label for="email" data-error="wrong" data-success="right"></label>
          </div>
        </div>
        <div class="col s3">
          Recibió:
          <div class="input-field inline">
            <input disabled id="email" type="text" class="validate">
            <label for="email" data-error="wrong" data-success="right"></label>
          </div>
        </div>
              
      </div>
 

    </form>
  </div>
   {% endblock %}



       {{form1.importancia}}
    {% if form %}
  <div class="input-field col s3">
    <select id="select1">
      <option value="" disabled selected></option>
      <!--{% for model in form1 %} 
      <option value="{{model.importancia.id}}">{{model.importancia}}</option>
       {%endfor%}-->
    jfjfjfjf
       {{model.importancia}}
    </select>
    <label>Importancia</label>
  </div>

   {%endif%}
    </div>








     def get_context_data(self, **kwargs):
        context = super(DocumentCreate,self).get_context_data(**kwargs)
        if 'form' not in context:
            context['form'] = self.form_class(self.request.GET)
        if 'form2' not in context:
            context['form2'] = self.second_form_class(self.request.GET)
            return context
    def post(self, request, *args, **kwargs):
        self.object = self.get_object
        form = self.form_class(request.POST)
        form2 = self.second_form_class(request.POST)
        if form.is_valid() and form2.is_valid():
            documento = form.save(commit=False)
            documento.folio = form2.save()
            documento.save()
            return HttpResponseRedirect(self.get_success_url())
        else:
            return self.render_to_response(self,get_context_data(form = form, form2=form2))
     

      {% block nav %}
    <nav>
    <div class="nav-wrapper  red darken-4">
    <a href="#" class="brand-logo">Últimos Documentos</a>
    <ul id="nav-mobile" class="right hide-on-med-and-down">
      <li><a href="/capturar">Capturar</a></li>
      <li><a href="/buscar">Buscar</a></li>
      <li><a href="/notificaciones">Notificaciones<span class="new badge">4</span></a></li>
    </ul>
    </div>
    </nav>
      <nav>
    <div class="nav-wrapper  grey lighten-1 r">
      <form>
        <div class="input-field ">
          <input id="search" type="search" placeholder="Ingresa el Folio" required>
          <label class="label-icon" for="search" ><i class="material-icons">search</i></label>
          <i class="material-icons">close</i>
        </div>
      </form>
    </div>
  </nav>
  {% endblock %}



      def get_context_data(self, **kwargs):
        context = super(DocumentCreate,self).get_context_data(**kwargs)
        if 'form' not in context:
            context['form'] = self.form_class(self.request.GET)
        if 'form2' not in context:
            context['form2'] = self.second_form_class(self.request.GET)
            return context
    def post(self, request, *args, **kwargs):
        self.object = self.get_object
        form = self.form_class(request.POST)
        form2 = self.second_form_class(request.POST)
        if form.is_valid() and form2.is_valid():
            documento = form.save(commit=False)
            documento.folio = form2.save()
            documento.save()
            return HttpResponseRedirect(self.get_success_url())
        else:
            return self.render_to_response(self,get_context_data(form = form, form2=form2))